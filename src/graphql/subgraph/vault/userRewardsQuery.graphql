query UserRewards(
  $user: Bytes!
  $dateTo: Timestamp!
  $dateFrom: Timestamp!
  $vaultAddress: String!
  $includeExchangeRate: Boolean!
) {
  exchangeRates: exchangeRateStats_collection (
    interval: day,
    where: {
      timestamp_gte: $dateFrom,
      timestamp_lte: $dateTo
    }
  ) @include(if: $includeExchangeRate) {
    timestamp
    usdToEurRate
    usdToGbpRate
    usdToCnyRate
    usdToJpyRate
    usdToKrwRate
    usdToAudRate
    assetsUsdRate
  }
  allocator: allocatorStats_collection(
    interval: day
    where: {
      timestamp_gte: $dateFrom,
      timestamp_lte: $dateTo,
      allocator_: {
        address: $user,
        vault: $vaultAddress
      }
    }
  ) {
    timestamp
    earnedAssets
  }
}
